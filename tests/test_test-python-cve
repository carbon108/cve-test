#!/bin/bash

tests_dir=$(dirname "$0")
src_dir=$(dirname "$tests_dir")

fixture_dir=$tests_dir/python-fixture
PATH=$src_dir:$PATH

saved_pwd=$PWD
cd $fixture_dir || exit 1

printf "\n\n ---- Setting up Python Unit-Test environment... ---->\n\n"

! command -v pipenv  > /dev/null &&\
    echo "'pipenv' not installed. Exiting..." &&\
    exit

pipenv install
source ./.venv/bin/activate
python --version

test-python-cve
cd $saved_pwd || exit 1